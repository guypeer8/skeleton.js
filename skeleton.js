var Skeleton=function(){function t(e){function n(t){var n=Object.assign({},e.defaults)||{};this.get=function(t){return n[t]||null},this.set=function(){if(2===arguments.length)n[arguments[0]]=arguments[1];else{if(1!==arguments.length)throw Error("Error on setting a value");var t=arguments[0];for(var e in t)n[e]=t[e]}},this.toJSON=function(){return n};for(var i in t)this.set(i,t[i]);e&&e.init&&e.init.call(this)}if(!(this instanceof t))return new t(e);for(var i in e)"init"!==i&&"defaults"!==i&&(n.prototype[i]=e[i]);return n}function e(t){function n(){function e(t){"number"==typeof t?n.splice(t,1):n=n.filter(function(e){return e!==t})}var n=[],i=t&&t.model;this.add=function(t){if(!(t instanceof i))throw Error("A collection must consist of models of same instance");n.push(t)},this.removeByFields=function(t){n=n.filter(function(e){for(var n in t)if(e.get(n)!==t[n])return!0;return!1})},this.remove=function(){if(1===arguments.length)e(arguments[0]);else for(var t=0;t<arguments.length;t++)e(arguments[t])},this.removeAll=function(){n=[]},this.models=function(){return n},this.filterToJSON=function(t){var e=this.toJSON();for(var n in t)e=e.filter(function(e){return e[n]===t[n]});return e},this.toJSON=function(){return n.map(function(t){return t.toJSON()})},t&&t.init&&t.init.call(this)}return this instanceof e?n:new e(t)}function n(t){function i(t){l.innerHTML=r(t)}function r(t){var e=t||a.toJSON(),n="";return e.forEach(function(t){n+=o(t)}),n}function o(t){var e=u;return e=e.replace(s,function(e,n){return t[n]})}if(!(this instanceof n))return new n(t);var u,s=/{{\s*(\w+)\s*}}/g,f=t&&t.model,l=document.getElementById(t&&t.element);if("string"==typeof(t&&t.template))u=t.template;else if("object"==typeof(t&&t.template)){if(!t.template.templateId)throw Error('Template must be a string, or an object with "templateId" field');u=document.getElementById(t.template.templateId).innerHTML}if(!f)throw Error("A model must be supplied");if(!l)throw Error("An element must be supplied, provided by its id");if(!u)throw Error("A template must be supplied");var a=new new e({model:f});this.getCollection=function(){return a},this.models=function(){return a.toJSON()},this.updateView=i,this.renderAll=function(){i()},this.pushAll=function(t){t.forEach(function(t){a.add(new f(t))}),i()},this.push=function(t){a.add(t instanceof f?t:new f(t)),i()},this.remove=function(t){a.removeByFields(t),i()},this.removeAll=function(){a.removeAll(),i()},this.size=function(){return this.models().length},this.filter=function(t){var e=a.filterToJSON(t);i(e)}}return{Model:t,List:n}}();